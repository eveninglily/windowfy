(function(a){a.fn.windowfy=function(l){return this.each(function(){var b=a.extend({title:"Window",minimize:!0,close:!0,id:"",onClose:function(){c.remove()},onMinimize:function(){f.toggle()}},l),d=a(this),c=a("<div/>").attr({"class":"windowfy",id:b.id}).appendTo(d.parent()),f=a("<div>").attr("class","windowfy-body").append(this),d=a("<div/>").attr({width:"100%"}),e=a("<div/>").attr({"class":"windowfy-title windowfy-grab"}).html(b.title).appendTo(d),g=a("<div/>").attr({"class":"windowfy-option"}).appendTo(d);
b.minimize&&a("<div/>").attr({"class":"windowfy-minimize"}).html("-").on("click",function(){b.onMinimize()}).appendTo(g);b.close&&a("<div/>").attr({"class":"windowfy-exit"}).html("x").on("click",function(){b.onClose()}).appendTo(g);c.append(d).append(f);b.close||b.minimize||e.css("width","100%");var h=0,k=0;a(document).on("mousedown",".windowfy-title",function(b){a(this).removeClass("windowfy-grab");a(this).addClass("windowfy-grabbing");h=b.pageX-c.offset().left;k=b.pageY-c.offset().top}).on("mouseup",
function(){e.addClass("windowfy-grab");e.removeClass("windowfy-grabbing")}).on("mousemove",function(a){e.hasClass("windowfy-grabbing")&&(a.preventDefault(),document.getSelection().removeAllRanges(),c.css({left:a.pageX-h+"px"}),c.css({top:a.pageY-k+"px"}))});return this})}})(jQuery);
